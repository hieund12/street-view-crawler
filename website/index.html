<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>jump to</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css' rel='stylesheet' />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div id="main">
        <div id='top'>
            <p class="title">Emilia Paranoica</p>
            <!-- <p class="menu"><a href="./about.html">info</a></p> -->
        </div>
        <div id='under'>
            <div id='map'></div>
            <div id='container'></div>
        </div>
        <marquee class="marquee" scrollamount="10" behavior="scroll" direction="left" onmouseover="this.stop();" onmouseleave="this.start();">
            By using machine learning, this website collects, on a monthly basis, random images of Bologna (Italy),
            retrieved from Google Street View and displays all the pictures it finds containing graffiti. </marquee>
        <button id='fly'>Get random tag</button>
    </div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoic2luYW5hdHJhIiwiYSI6ImNpcTloaTlocjAwNWFodm0yODJjODF5MXYifQ.urgyj3bpfbG3dX4uTOOZtQ';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/sinanatra/cj9t3byig2lpu2qqh54d6zlie',
            center: [11.30, 44.49],
            zoom: 7
        });

        $(document).ready(function () {
            var imgLocation = ['(44.48549161591832, 11.345460517246396)-8-265.jpg', '(44.48533222592161, 11.352605010518804)-7-45.jpg', '(44.49504741336215, 11.3607043383527)-21-45.jpg', '(44.492777043328694, 11.355896472460932)-9-45.jpg', '(44.4982204480385, 11.327588591715822)-25-45.jpg', '(44.499488037591874, 11.35854419914895)-5-90.jpg', '(44.49488660219203, 11.352527591735985)-20-0.jpg', '(44.499488037591874, 11.35854419914895)-5-45.jpg', '(44.49370102800866, 11.314417462157634)-25-355.jpg', '(44.4982204480385, 11.327588591715822)-25-90.jpg', '(44.48533222592161, 11.352605010518804)-7-90.jpg', '(44.48902657211555, 11.360321812448305)-35-355.jpg', '(44.495531133689944, 11.359155926205197)-15-90.jpg', '(44.49241802941435, 11.345009830358519)-18-90.jpg', '(44.4878639813376, 11.341740114989554)-6-0.jpg', '(44.4878639813376, 11.341740114989554)-6-355.jpg', '(44.48902657211555, 11.360321812448305)-35-0.jpg', '.DS_Store', '(44.49812066810713, 11.358304057768073)-16-135.jpg', '(44.48871908076167, 11.347088145119859)-43-135.jpg', '(44.492275025021236, 11.335926932292281)-21-175.jpg', '(44.49011964961726, 11.338319529828116)-7-135.jpg', '(44.49386225936863, 11.330422720628748)-16-220.jpg', '(44.49674808746743, 11.330098447448995)-3-135.jpg', '(44.48533222592161, 11.352605010518804)-7-355.jpg', '(44.48791586946691, 11.351601307158003)-28-45.jpg', '(44.4938966623416, 11.307402847576272)-42-0.jpg', '(44.488059692776304, 11.348966165648063)-26-45.jpg', '(44.493645257919255, 11.362103136822327)-11-45.jpg', '(44.49488660219203, 11.352527591735985)-20-45.jpg', '(44.488059692776304, 11.348966165648063)-26-135.jpg', '(44.49822222943661, 11.341690474103972)-7-0.jpg', '(44.492275025021236, 11.335926932292281)-21-310.jpg', '(44.48902657211555, 11.360321812448305)-35-135.jpg', '(44.49488660219203, 11.352527591735985)-20-90.jpg', '(44.492275025021236, 11.335926932292281)-21-265.jpg', '(44.488059692776304, 11.348966165648063)-26-90.jpg', '(44.49674808746743, 11.330098447448995)-3-90.jpg', '(44.48402437789363, 11.348659222340212)-15-45.jpg', '(44.496405150945144, 11.336186238400895)-13-0.jpg', '(44.48607076238952, 11.353712570959994)-3-0.jpg', '(44.48549161591832, 11.345460517246396)-8-175.jpg', '(44.49256337179464, 11.318348947452618)-22-90.jpg', '(44.49386225936863, 11.330422720628748)-16-135.jpg', '(44.48533222592161, 11.352605010518804)-7-135.jpg', '(44.48791586946691, 11.351601307158003)-28-0.jpg', '(44.494315777477425, 11.349650721330189)-26-355.jpg', '(44.496405150945144, 11.336186238400895)-13-90.jpg', '(44.49241802941435, 11.345009830358519)-18-135.jpg', '(44.494315777477425, 11.349650721330189)-26-220.jpg', '(44.4938966623416, 11.307402847576272)-42-45.jpg', '(44.4878639813376, 11.341740114989554)-6-310.jpg', '(44.493645257919255, 11.362103136822327)-11-0.jpg', '(44.492777043328694, 11.355896472460932)-9-220.jpg', '(44.4938966623416, 11.307402847576272)-42-90.jpg', '(44.499488037591874, 11.35854419914895)-5-135.jpg', '(44.48871908076167, 11.347088145119859)-43-90.jpg', '(44.48533222592161, 11.352605010518804)-7-310.jpg', '(44.496405150945144, 11.336186238400895)-13-45.jpg', '(44.48930096254438, 11.332253756334834)-27-45.jpg', '(44.486619896924836, 11.349311418709423)-38-0.jpg', '(44.49829534632772, 11.336262364497474)-21-45.jpg', '(44.48549161591832, 11.345460517246396)-8-220.jpg', '(44.48469896702023, 11.357445369129268)-15-90.jpg', '(44.49464678762997, 11.32786089326286)-25-175.jpg', '(44.48520749510416, 11.364380962528317)-37-45.jpg', '(44.492275025021236, 11.335926932292281)-21-135.jpg', '(44.49835573783161, 11.346451138589577)-50-265.jpg', '(44.49829534632772, 11.336262364497474)-21-90.jpg', '(44.48902657211555, 11.360321812448305)-35-310.jpg', '(44.49192761585852, 11.336190641605212)-23-265.jpg', '(44.48930096254438, 11.332253756334834)-27-90.jpg', '(44.485922419520904, 11.346770390424206)-2-45.jpg', '(44.49192761585852, 11.336190641605212)-23-310.jpg', '(44.498017360758496, 11.311831965119218)-19-135.jpg', '(44.49301556944168, 11.344302230290456)-5-0.jpg', '(44.4938966623416, 11.307402847576272)-42-355.jpg', '(44.49011964961726, 11.338319529828116)-7-90.jpg', '(44.49504741336215, 11.3607043383527)-21-0.jpg', '(44.49370102800866, 11.314417462157634)-25-90.jpg', '(44.49822222943661, 11.341690474103972)-7-45.jpg', '(44.49464678762997, 11.32786089326286)-25-310.jpg', '(44.49370102800866, 11.314417462157634)-25-45.jpg', '(44.49822222943661, 11.341690474103972)-7-90.jpg', '(44.49370102800866, 11.314417462157634)-25-0.jpg', '(44.48533222592161, 11.352605010518804)-7-0.jpg', '(44.49301556944168, 11.344302230290456)-5-45.jpg', '(44.489077447223224, 11.349713449342156)-47-90.jpg', '(44.49386225936863, 11.330422720628748)-16-175.jpg', '(44.48602168969854, 11.353863573486702)-16-90.jpg', '(44.48549161591832, 11.345460517246396)-8-135.jpg', '(44.48602168969854, 11.353863573486702)-16-45.jpg', '(44.489077447223224, 11.349713449342156)-47-135.jpg', '(44.498044884632876, 11.321066538993971)-14-135.jpg', '(44.48246608367544, 11.359487039515562)-21-45.jpg', '(44.49822222943661, 11.341690474103972)-7-135.jpg', '(44.489077447223224, 11.349713449342156)-47-45.jpg', '(44.49829534632772, 11.336262364497474)-21-135.jpg', '(44.49241802941435, 11.345009830358519)-18-0.jpg', '(44.48902657211555, 11.360321812448305)-35-90.jpg'];
            var randomVal;
            var splitParenthesis;
            var removeParenthesis;
            var rawCoordinates;

            $('#fly').click(function (e) {
                randomVal = Math.floor(Math.random() * imgLocation.length);
                e.preventDefault();

                // get text?
                splitParenthesis = imgLocation[randomVal].match("\((.*)\)")
                removeParenthesis = imgLocation[randomVal].split("-")[0]
                rawCoordinates = removeParenthesis.substring(1, removeParenthesis.length - 1);

                console.log("wella", rawCoordinates.split(",")[0], rawCoordinates.split(",")[1]);
                map.flyTo({
                    center: [
                        rawCoordinates.split(",")[1],
                        rawCoordinates.split(",")[0]
                    ],
                    zoom: 18
                });
                console.log(rawCoordinates.split(",")[1], rawCoordinates.split(",")[0])
                console.log(imgLocation[randomVal])
                $('#container').html('<img src="./files/' + imgLocation[randomVal] + '">')
            });
            var ob = $('.scrollingtext');
            var speed = 10000;

            ob.bind('marquee', function () {
                var tw = ob.width();
                var ww = ob.parent().width();
                ob.css({ right: -tw });
                ob.animate({ right: ww }, speed, 'linear', function () {
                    ob.trigger('marquee');
                });
            }).trigger('marquee');

            ob.hover(function () {
                ob.stop();
            }, function () {
                var tw = ob.width();
                var ww = ob.parent().width();
                var cur = parseInt(ob.css('right'), 10);
                var speedDecrease = 1 - ((cur + tw) / (ww + tw));
                ob.animate({ right: ww }, speedDecrease * speed, 'linear', function () {
                    ob.trigger('marquee');
                });
            });
        });
    </script>
</body>

</html>